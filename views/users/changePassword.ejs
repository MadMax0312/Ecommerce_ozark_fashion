<%- include('../layouts/header.ejs') %>

<div class="container" style="margin-top: 100px">
    <h2 class="mb-4 text-center"><strong>Change Password</strong></h2>

    <% if(typeof message !== 'undefined'){ %>

    <h6 id="invalid-msg" class="text-danger text-center"><%- message %></h6>

    <% } %>

    <form action="" method="POST" onsubmit="return validatForm()">
        <div class="form-group">
            <input type="password" class="form-control" id="password" name="password" placeholder="Password" />
            <p id="password-error" class="error-message"></p>
        </div>
        <div class="form-group">
            <input type="password" class="form-control" id="cpassword" name="cpassword" placeholder="Confirm Password" />
            <p id="password-error" class="error-message"></p>
        </div>
        <div id="password-mismatch" class="alert alert-danger mt-3" style="display: none">
            Passwords do not match. Please try again.
        </div>
        <input type="hidden" name="user_id" value="<%= user_id %>" />
        <button type="submit" class="btn btn-success">Reset</button>
    </form>
</div>

<script>
    function validatForm() {
        document.getElementById("password-error").textContent = "";

        const password = document.getElementById("password").value;

        if (!password) {
            document.getElementById("password-error").textContent = "Password field should not be empty";
            return false;
        }

        if (password.length < 4) {
            document.getElementById("password-error").textContent = "Password must be at least 4 characters";
            return false;
        }

        if (password.length > 10) {
            document.getElementById("password-error").textContent = "Password should not be greater than 10 characters";
            return false;
        }

        return true;
    }
</script>

<%- include('../layouts/footer.ejs') %>
